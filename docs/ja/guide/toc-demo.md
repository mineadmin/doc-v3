# 強化型目次ナビゲーションデモ

このページでは新しく実装した強化型ページ内ナビゲーション（目次）機能を紹介しています。右側の目次ナビゲーションに注目してください。以下の特徴があります：

## 主な機能特性

### 視覚的階層の最適化

新しい目次ナビゲーションは明確な視覚的階層を持ち、異なるレベルの見出しはインデント、フォントサイズ、色で区別されます。

#### 見出しレベルの区別
- H1見出しは主要なセクションとして目立つ視覚効果
- H2-H6見出しは階層に応じて表示
- 各レベルに適切なインデントと間隔

#### 色とスタイル
- アクティブ項目はグラデーションでハイライト
- ホバー効果で即時の視覚的フィードバック
- ダークモードでは自動的にカラースキームを調整

### インタラクション体験の向上

強化されたインタラクション機能でナビゲーションがよりスムーズで直感的になります。

#### スムーズスクロール
目次項目をクリックすると、ページはジャンプではなくスムーズに該当位置までスクロールします。

#### スクロール同期
ページをスクロールすると、目次は自動的に現在表示されているセクションをハイライトします。

#### キーボードナビゲーション
キーボードショートカットでナビゲーション可能：
- `↑/↓` または `j/k` - 上下移動
- `Enter` または `Space` - 現在の項目をアクティブ化
- `Home/End` - 最初/最後の項目へジャンプ
- `Esc` - モバイルのフローティングレイヤーを閉じる

### モダンなデザイン要素

現代的なデザイン言語を採用：

#### グラデーションとシャドウ
- アクティブインジケーターに優雅なグラデーション効果
- 微妙なシャドウで奥行き感を追加
- 角丸デザインで現代的

#### アニメーショントランジション
- 全ての状態変化にスムーズなトランジションアニメーション
- アクティブ項目のパルスアニメーションで視覚的ガイド
- モバイルのポップアップアニメーションが自然

## 機能強化

### 読了時間予測

目次上部に推定読了時間を表示し、読者が時間を計画できるよう支援。計算には以下を考慮：
- テキストの長さ
- コードブロックの数
- 画像の数

### スクロール進捗表示

ページ右側に垂直の進捗バーがあり、読書の進捗を表示します。

### 長い目次の折りたたみ

多くのセクションを含む長文書では、折りたたみ/展開機能をサポート：
- Ctrl/Cmd + H1見出しクリックで子セクションを折りたたみ
- 折りたたみ状態を自動記憶

### 検索ハイライトサポート

ページ検索機能を使用時、一致する目次項目がハイライト表示されます。

## 国際化サポート

### 多言語対応

目次ナビゲーションは複数言語を完璧にサポート：

#### 中国語サポート
- 最適化された中国語フォントレンダリング
- 適切な文字間隔
- ローカライズされたインターフェーステキスト

#### 日本語サポート
- 日本語フォント最適化
- 仮名と漢字の混合組版
- 日本のインターフェース習慣

#### 英語サポート
- 欧文フォント最適化
- 自然な単語間隔
- 英語インターフェーステキスト

### CJK文字最適化

中国語・日本語・韓国語文字の特別な最適化：
- より良いフォントウェイト制御
- 最適化された行間設定
- 適切な段落間隔

## モバイル体験

### レスポンシブデザイン

目次ナビゲーションは異なるデバイスで良好なパフォーマンス：

#### デスクトップ
- 右側に固定
- 常に表示
- 画面スペースを最大限活用

#### タブレット
- 適応型幅
- フォントサイズ調整
- タッチフレンドリーなインタラクション

#### モバイル
- フローティングボタンで起動
- 下部ポップアップパネル
- ジェスチャーサポート

### タッチ最適化

モバイルデバイスの特別な最適化：
- 大きなタップ領域
- タッチジェスチャーサポート
- 誤タップ防止設計

## 技術的実装詳細

### パフォーマンス最適化

滑らかなユーザー体験を確保するためのパフォーマンス重視：

#### ディバウンスとスロットル
- スクロールイベントにスロットル処理
- ウィンドウリサイズにディバウンス
- 不要な再描画を削減

#### GPUアクセラレーション
- アニメーションにtransformプロパティ使用
- ハードウェアアクセラレーション有効化
- 最適化されたリフローと再描画

#### レイジーローディング
- オンデマンドで機能モジュールをロード
- 非重要機能の初期化を遅延
- 初回描画時間を最適化

### アクセシビリティ

全てのユーザーの使用体験を重視：

#### スクリーンリーダーサポート
- セマンティックなHTML構造
- ARIA属性注釈
- キーボードナビゲーションサポート

#### ハイコントラストモード
- システム設定に自動適応
- 強化されたボーダーとアウトライン
- 明確なフォーカス表示

#### アニメーション削減
- ユーザーのアニメーション設定を尊重
- アニメーションなしの代替案を提供
- 機能の完全性を維持

## 使用例

### 基本設定

目次ナビゲーションは自動生成され、追加設定は不要。ただしオプションで動作をカスタマイズ可能：

```typescript
enhanceTOC({
  enableReadingTime: true,    // 読了時間を表示
  enableProgress: true,       // 進捗バーを表示
  enableCollapse: true,       // 折りたたみ機能を有効化
  enableSmoothScroll: true,   // スムーズスクロール
  enableKeyboardNav: true,    // キーボードナビゲーション
  enableMobileFloat: true,    // モバイルフローティング
  enableSearchHighlight: true // 検索ハイライト
})
```

### スタイルカスタマイズ

CSS変数で外観をカスタマイズ可能：

```css
:root {
  --toc-gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --toc-indent-base: 1rem;
  --toc-font-h1: 0.95rem;
  /* その他の変数... */
}
```

## まとめ

この強化型ページ内ナビゲーションシステムは、ドキュメントの可読性とナビゲーション体験を大幅に向上させます。視覚的にモダンで魅力的なだけでなく、機能面でも豊富なインタラクション特性を提供します。デスクトップでもモバイルでも、どの言語でも、ユーザーは一貫した優れた使用体験を得られます。

これらの改善により、長文書を閲覧する際にユーザーが以下を実現できるようになります：
- ドキュメント構造を迅速に理解
- 興味のあるコンテンツを簡単に特定
- 読書進捗を追跡
- スムーズなナビゲーション体験を享受

強化型目次ナビゲーションシステムをご体験いただきありがとうございます！