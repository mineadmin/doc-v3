# MineAdmin åœ‹éš›åŒ–é…ç½®å®Œæ•´æŒ‡å—

MineAdmin å‰ç«¯åŸºæ–¼ Vue i18n v11 æ§‹å»ºäº†å®Œæ•´çš„åœ‹éš›åŒ–è§£æ±ºæ–¹æ¡ˆï¼Œæ”¯æ´å¤šèªè¨€åˆ‡æ›ã€å‹•æ…‹èªè¨€åŒ…è¼‰å…¥å’Œæ¨¡çµ„åŒ–ç¿»è­¯ç®¡ç†ã€‚æœ¬æ–‡ä»¶å°‡è©³ç´°ä»‹ç´¹ç³»çµ±çš„åœ‹éš›åŒ–å¯¦ç¾æ©Ÿåˆ¶å’Œä½¿ç”¨æ–¹æ³•ã€‚

## æ¦‚è¿°

### æ”¯æ´çš„èªè¨€
- ç°¡é«”ä¸­æ–‡ (zh_CN) - é è¨­èªè¨€
- ç¹é«”ä¸­æ–‡ (zh_TW)
- è‹±æ–‡ (en)

### æ ¸å¿ƒç‰¹æ€§
- ğŸŒ å¤šèªè¨€å‹•æ…‹åˆ‡æ›
- ğŸ“¦ æ¨¡çµ„åŒ–èªè¨€åŒ…ç®¡ç†
- âš¡ å‹•æ…‹èªè¨€åŒ…è¼‰å…¥
- ğŸ”§ é–‹ç™¼å·¥å…·æ•´åˆ
- ğŸ“± å…¨åŸŸæ€§å’Œå€åŸŸæ€§ä½œç”¨åŸŸæ”¯æ´
- ğŸ¯ TypeScript å‹åˆ¥å®‰å…¨

### æŠ€è¡“æ£§
- **Vue i18n**: 11.1.2
- **æ§‹å»ºå¤–æ›**: @intlify/unplugin-vue-i18n 6.0.3
- **èªè¨€æ ¼å¼**: YAML (æ”¯æ´ JSON)
- **å‹åˆ¥ç³»çµ±**: TypeScript

## å°ˆæ¡ˆé…ç½®

### ç³»çµ±åˆå§‹åŒ–

ç³»çµ±åœ¨ `/web/src/bootstrap.ts` ä¸­åˆå§‹åŒ–åœ‹éš›åŒ–é…ç½®ï¼š

```typescript
// åŸå§‹ç¢¼ä½ç½®: web/src/bootstrap.ts:44-67
// GitHub: https://github.com/mineadmin/mineadmin/blob/master/web/src/bootstrap.ts

async function createI18nService(app: App) {
  // è‡ªå‹•æƒæèªè¨€åŒ…æª”æ¡ˆ
  const locales: any[] = Object.entries(import.meta.glob('./locales/*.y(a)?ml')).map(([key]: any) => {
    const [, value, label] = key.match(/^.\/locales\/(\w+)\[([^[\]]+)\]\.yaml$/)
    return { label, value }
  })
  
  useUserStore().setLocales(locales)
  
  // è™•ç†è¨Šæ¯æ ¼å¼
  Object.keys(messages as any).map((name: string) => {
    const matchValue = name.match(/(\w+)/) as RegExpMatchArray | null
    if (messages && matchValue) {
      messages[matchValue[1]] = messages[name]
      delete messages[name]
    }
  })

  // å»ºç«‹ i18n ä¾‹é …
  app.use(createI18n({
    legacy: false,                    // ä½¿ç”¨ Composition API
    globalInjection: true,            // å…¨åŸŸæ€§æ³¨å…¥
    fallbackLocale: 'zh_CN',         // å›é€€èªè¨€
    locale: useUserStore().getLanguage(), // ç•¶å‰èªè¨€
    silentTranslationWarn: true,      // éœé»˜ç¿»è­¯è­¦å‘Š
    silentFallbackWarn: true,         // éœé»˜å›é€€è­¦å‘Š
    messages,                         // èªè¨€åŒ…è³‡æ–™
  }))
}
```

## ç³»çµ±æ¶æ§‹

### æ¶æ§‹åœ–

```mermaid
graph TB
    A[Vue App] --> B[Bootstrap]
    B --> C[I18n Service]
    C --> D[createI18n]
    D --> E[Global Messages]
    D --> F[Local Messages]
    
    E --> G[Core Locales]
    E --> H[Module Locales]
    E --> I[Plugin Locales]
    
    F --> J[Component i18n blocks]
    
    K[useTrans Hook] --> L[Global Translation]
    K --> M[Local Translation]
    
    N[useLocalTrans Hook] --> M
    
    G --> O[/src/locales/*.yaml]
    H --> P[/src/modules/*/locales/*.yaml]
    I --> Q[/src/plugins/*/locales/*.yaml]
    
    style A fill:#e1f5fe
    style C fill:#f3e5f5
    style K fill:#fff3e0
    style N fill:#fff3e0
```

### æª”æ¡ˆçµæ§‹

```
web/src/
â”œâ”€â”€ locales/                           # æ ¸å¿ƒèªè¨€åŒ…
â”‚   â”œâ”€â”€ zh_CN[ç°¡é«”ä¸­æ–‡].yaml
â”‚   â”œâ”€â”€ en[English].yaml
â”‚   â””â”€â”€ zh_TW[ç¹é«”ä¸­æ–‡].yaml
â”œâ”€â”€ modules/                           # æ¨¡çµ„èªè¨€åŒ…
â”‚   â””â”€â”€ base/
â”‚       â””â”€â”€ locales/
â”‚           â”œâ”€â”€ zh_CN[ç°¡é«”ä¸­æ–‡].yaml
â”‚           â”œâ”€â”€ en[English].yaml
â”‚           â””â”€â”€ zh_TW[ç¹é«”ä¸­æ–‡].yaml
â”œâ”€â”€ plugins/                           # å¤–æ›èªè¨€åŒ…
â”‚   â””â”€â”€ mine-admin/
â”‚       â””â”€â”€ code-generator/
â”‚           â””â”€â”€ web/
â”‚               â””â”€â”€ locales/
â”‚                   â”œâ”€â”€ zh_CN[ç°¡é«”ä¸­æ–‡].yaml
â”‚                   â”œâ”€â”€ en[English].yaml
â”‚                   â””â”€â”€ zh_TW[ç¹é«”ä¸­æ–‡].yaml
â””â”€â”€ hooks/                             # åœ‹éš›åŒ– Hooks
    â”œâ”€â”€ auto-imports/
    â”‚   â””â”€â”€ useTrans.ts               # è‡ªå‹•åŒ¯å…¥çš„ç¿»è­¯ Hook
    â””â”€â”€ useLocalTrans.ts              # å€åŸŸæ€§ç¿»è­¯ Hook
```

## èªè¨€åŒ…ç®¡ç†

### æª”æ¡ˆå‘½åè¦ç¯„

èªè¨€åŒ…æª”æ¡ˆå¿…é ˆéµå¾ªç‰¹å®šæ ¼å¼ï¼š`èªè¨€è­˜åˆ¥ç¬¦è™Ÿ[æœ¬èªè¨€åç¨±].yaml`

```bash
# æ­£ç¢ºçš„å‘½åæ ¼å¼
zh_CN[ç°¡é«”ä¸­æ–‡].yaml
en[English].yaml  
zh_TW[ç¹é«”ä¸­æ–‡].yaml

# éŒ¯èª¤çš„å‘½åæ ¼å¼
zh_CN.yaml         # ç¼ºå°‘èªè¨€åç¨±
en[è‹±æ–‡].yaml      # èªè¨€åç¨±éŒ¯èª¤
zh-CN[ç°¡é«”ä¸­æ–‡].yaml  # èªè¨€è­˜åˆ¥ç¬¦è™Ÿæ ¼å¼éŒ¯èª¤
```

### å…¨åŸŸæ€§èªè¨€åŒ…

ç³»çµ±è‡ªå‹•æƒæä»¥ä¸‹ä¸‰å€‹ä½ç½®çš„èªè¨€åŒ…ï¼š

1. **æ ¸å¿ƒèªè¨€åŒ…**: `src/locales/`
2. **æ¨¡çµ„èªè¨€åŒ…**: `src/modules/<æ¨¡çµ„å>/locales/`
3. **å¤–æ›èªè¨€åŒ…**: `src/plugins/<å¤–æ›å>/locales/`

::: danger é‡è¦æé†’
**æ¨¡çµ„** å’Œ **å¤–æ›** ä¸‹çš„èªè¨€åŒ…æª”åå¿…é ˆèˆ‡ `src/locales` ä¸‹çš„æª”åå®Œå…¨ä¸€è‡´ï¼Œå¦å‰‡æœƒå‡ºç¾æ‰¾ä¸åˆ°ç¿»è­¯éµçš„æ§åˆ¶æª¯è­¦å‘Šã€‚
:::

### èªè¨€åŒ…å…§å®¹ç¤ºä¾‹

**æ ¸å¿ƒèªè¨€åŒ…ç¤ºä¾‹** (`src/locales/zh_CN[ç°¡é«”ä¸­æ–‡].yaml`)ï¼š

```yaml
# ç™»å…¥è¡¨å–®
loginForm:
  loginButton: ç™»å…¥
  passwordPlaceholder: è«‹è¼¸å…¥å¯†ç¢¼
  codeLabel: é©—è­‰ç¢¼
  usernameLabel: è³¬æˆ¶

# CRUD æ“ä½œ
crud:
  cancel: å–æ¶ˆ
  save: å„²å­˜
  ok: ç¢ºå®š
  add: æ–°å¢
  edit: ç·¨è¼¯
  delete: åˆªé™¤
  createSuccess: å»ºç«‹æˆåŠŸ
  updateSuccess: ä¿®æ”¹æˆåŠŸ
  delMessage: æ˜¯å¦åˆªé™¤æ‰€é¸ä¸­è³‡æ–™ï¼Ÿ

# è¡¨å–®é©—è­‰
form:
  pleaseInput: è«‹è¼¸å…¥{msg}
  pleaseSelect: è«‹é¸æ“‡{msg}
  requiredInput: '{msg}å¿…å¡«'
```

### å€åŸŸæ€§èªè¨€åŒ…

åœ¨ Vue å…ƒä»¶ä¸­å®šç¾©å€åŸŸæ€§èªè¨€åŒ…ï¼š

```vue
<template>
  <div>
    <h1>{{ t('welcome') }}</h1>
    <p>{{ t('description') }}</p>
  </div>
</template>

<script setup lang="ts">
const { t } = useLocalTrans()
</script>

<i18n lang="yaml">
zh_CN:
  welcome: æ­¡è¿ä½¿ç”¨
  description: é€™æ˜¯ä¸€å€‹ç¤ºä¾‹é é¢
zh_TW:
  welcome: æ­¡è¿ä½¿ç”¨
  description: é€™æ˜¯ä¸€å€‹ç¤ºä¾‹é é¢
en:
  welcome: Welcome
  description: This is a sample page
</i18n>
```

## Hook ç³»çµ±è©³è§£

### useTrans Hook

**åŸå§‹ç¢¼ä½ç½®**: `web/src/hooks/auto-imports/useTrans.ts`  
**GitHub**: https://github.com/mineadmin/mineadmin/blob/master/web/src/hooks/auto-imports/useTrans.ts

```typescript
import { useI18n } from 'vue-i18n'
import type { ComposerTranslation } from 'vue-i18n'

export interface TransType {
  globalTrans: ComposerTranslation
  localTrans: ComposerTranslation
}

export function useTrans(key: any | null = null): TransType | string | any {
  const global = useI18n()
  const local = useI18n({
    inheritLocale: true,
    useScope: 'local',
  })

  if (key === null) {
    return {
      localTrans: local.t,
      globalTrans: global.t,
    }
  }
  else {
    // å„ªå…ˆæŸ¥è©¢å…¨åŸŸæ€§ç¿»è­¯ï¼Œç„¶å¾ŒæŸ¥è©¢å€åŸŸæ€§ç¿»è­¯
    return global.te(key) ? global.t(key) : local.te(key) ? local.t(key) : key
  }
}
```

### useLocalTrans Hook

**åŸå§‹ç¢¼ä½ç½®**: `web/src/hooks/useLocalTrans.ts`  
**GitHub**: https://github.com/mineadmin/mineadmin/blob/master/web/src/hooks/useLocalTrans.ts

```typescript
import { useI18n } from 'vue-i18n'
import type { ComposerTranslation } from 'vue-i18n'

export function useLocalTrans(key: any | null = null): string | ComposerTranslation | any {
  const { t } = useI18n({
    inheritLocale: true,
    useScope: 'local',
  })
  return key === null ? t as ComposerTranslation : t(key) as string
}
```

## ä½¿ç”¨æ–¹æ³•

### åŸºç¤ç”¨æ³•

#### 1. å…¨åŸŸæ€§å’Œå€åŸŸæ€§ç¿»è­¯ç‰©ä»¶

```vue
<script setup lang="ts">
import type { TransType } from '@/hooks/auto-imports/useTrans.ts'

// ç²å–ç¿»è­¯ç‰©ä»¶
const i18n = useTrans() as TransType
const t = i18n.globalTrans  // å…¨åŸŸæ€§ç¿»è­¯å‡½å¼
const localT = i18n.localTrans  // å€åŸŸæ€§ç¿»è­¯å‡½å¼

// ä½¿ç”¨ç¤ºä¾‹
const title = t('crud.createSuccess')  // "å»ºç«‹æˆåŠŸ"
const localTitle = localT('welcome')   // å…ƒä»¶å…§å®šç¾©çš„ç¿»è­¯
</script>
```

#### 2. ç›´æ¥å‘¼å«ç¿»è­¯

```typescript
// æ™ºæ…§ç¿»è­¯ï¼šå„ªå…ˆå…¨åŸŸæ€§ï¼Œå›é€€åˆ°å€åŸŸæ€§
const message = useTrans('crud.updateSuccess')  // "ä¿®æ”¹æˆåŠŸ"

// åƒ…ä½¿ç”¨å€åŸŸæ€§ç¿»è­¯
const localMessage = useLocalTrans('description')
```

### å¯¦éš›å°ˆæ¡ˆæ¡ˆä¾‹

**åŸå§‹ç¢¼ä½ç½®**: `web/src/modules/base/views/permission/user/index.vue`  
**GitHub**: https://github.com/mineadmin/mineadmin/blob/master/web/src/modules/base/views/permission/user/index.vue

```vue
<script setup lang="tsx">
import type { TransType } from '@/hooks/auto-imports/useTrans.ts'

// ç²å–åœ‹éš›åŒ–ç‰©ä»¶
const i18n = useTrans() as TransType
const t = i18n.globalTrans

// å½ˆçª—é…ç½®ä¸­ä½¿ç”¨ç¿»è­¯
const maDialog: UseDialogExpose = useDialog({
  ok: ({ formType }, okLoadingState: (state: boolean) => void) => {
    // æ ¹æ“šæ“ä½œå‹åˆ¥é¡¯ç¤ºä¸åŒè¨Šæ¯
    switch (formType) {
      case 'add':
        formRef.value.add().then((res: any) => {
          res.code === ResultCode.SUCCESS 
            ? msg.success(t('crud.createSuccess'))  // "å»ºç«‹æˆåŠŸ"
            : msg.error(res.message)
        })
        break
      case 'edit':
        formRef.value.edit().then((res: any) => {
          res.code === 200 
            ? msg.success(t('crud.updateSuccess'))  // "ä¿®æ”¹æˆåŠŸ"
            : msg.error(res.message)
        })
        break
    }
  },
})

// è¡¨æ ¼é…ç½®ä¸­ä½¿ç”¨ç¿»è­¯
const options = ref<MaProTableOptions>({
  header: {
    mainTitle: () => t('baseUserManage.mainTitle'),
    subTitle: () => t('baseUserManage.subTitle'),
  },
})
</script>
```

### å¸¶å¼•æ•¸çš„ç¿»è­¯

```vue
<template>
  <div>
    <!-- é¡¯ç¤ºï¼šè«‹è¼¸å…¥ä½¿ç”¨è€…åç¨± -->
    <el-input :placeholder="t('form.pleaseInput', { msg: 'ä½¿ç”¨è€…åç¨±' })" />
    
    <!-- é¡¯ç¤ºï¼šä½¿ç”¨è€…åç¨±å¿…å¡« -->
    <span class="error">{{ t('form.requiredInput', { msg: 'ä½¿ç”¨è€…åç¨±' }) }}</span>
  </div>
</template>

<script setup lang="ts">
const { globalTrans: t } = useTrans()
</script>
```

### æ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨

```vue
<template>
  <div>
    <!-- ä½¿ç”¨å…¨åŸŸæ€§å‡½å¼ $t -->
    <el-button>{{ $t('crud.save') }}</el-button>
    
    <!-- ä½¿ç”¨ Hook -->
    <el-button>{{ t('crud.cancel') }}</el-button>
  </div>
</template>
```

## é«˜éšåŠŸèƒ½

### å‹•æ…‹èªè¨€åˆ‡æ›

```typescript
// åˆ‡æ›åˆ°è‹±æ–‡
const { locale } = useI18n()
locale.value = 'en'

// æˆ–ä½¿ç”¨ä½¿ç”¨è€…å„²å­˜
const userStore = useUserStore()
userStore.setLanguage('en')
```

### æª¢æŸ¥ç¿»è­¯éµæ˜¯å¦å­˜åœ¨

```typescript
const { te, t } = useI18n()

// æª¢æŸ¥éµæ˜¯å¦å­˜åœ¨
if (te('some.key')) {
  const translation = t('some.key')
} else {
  console.warn('Translation key not found: some.key')
}
```

### è¤‡æ•¸è™•ç†

```yaml
# èªè¨€åŒ…å®šç¾©
en:
  cart:
    items: 'no items | one item | {count} items'
zh_CN:
  cart:
    items: '{count} å€‹å•†å“'
```

```typescript
// ä½¿ç”¨
const itemCount = ref(5)
const message = t('cart.items', itemCount.value)  // "5 å€‹å•†å“"
```

## æ•ˆèƒ½æœ€ä½³åŒ–

### æ‡¶è¼‰å…¥èªè¨€åŒ…

```typescript
// æŒ‰éœ€è¼‰å…¥èªè¨€åŒ…
const loadLanguage = async (locale: string) => {
  try {
    const messages = await import(`../locales/${locale}[${getLocaleName(locale)}].yaml`)
    const { global } = useI18n()
    global.setLocaleMessage(locale, messages.default)
    global.locale.value = locale
  } catch (error) {
    console.error(`Failed to load language pack: ${locale}`, error)
  }
}
```

### å¿«å–æœ€ä½³åŒ–

```typescript
// å¿«å–ç¿»è­¯çµæœ
const translationCache = new Map<string, string>()

const cachedT = (key: string, ...args: any[]) => {
  const cacheKey = `${key}-${JSON.stringify(args)}`
  if (translationCache.has(cacheKey)) {
    return translationCache.get(cacheKey)
  }
  
  const result = t(key, ...args)
  translationCache.set(cacheKey, result)
  return result
}
```

## é™¤éŒ¯å’Œæ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

#### 1. æ‰¾ä¸åˆ°ç¿»è­¯éµ

**å•é¡Œ**: æ§åˆ¶æª¯å‡ºç¾è­¦å‘Š `Not found 'xxx' key in 'zh_CN' locale messages.`

**è§£æ±ºæ–¹æ¡ˆ**:
```typescript
// æª¢æŸ¥éµæ˜¯å¦å­˜åœ¨
const { te, t } = useI18n()
const safeT = (key: string, fallback: string = key) => {
  return te(key) ? t(key) : fallback
}
```

#### 2. æ¨¡çµ„èªè¨€åŒ…ä¸ç”Ÿæ•ˆ

**å•é¡Œ**: æ¨¡çµ„æˆ–å¤–æ›çš„èªè¨€åŒ…æ²’æœ‰è¢«è¼‰å…¥

**è§£æ±ºæ–¹æ¡ˆ**:
1. ç¢ºä¿æª”åæ ¼å¼æ­£ç¢ºï¼š`zh_CN[ç°¡é«”ä¸­æ–‡].yaml`
2. æª¢æŸ¥æª”æ¡ˆè·¯å¾‘æ˜¯å¦åœ¨æƒæç¯„åœå…§
3. é©—è­‰ YAML èªæ³•æ˜¯å¦æ­£ç¢º

#### 3. å‹åˆ¥éŒ¯èª¤

**å•é¡Œ**: TypeScript å‹åˆ¥æª¢æŸ¥å¤±æ•—

**è§£æ±ºæ–¹æ¡ˆ**:
```typescript
// ä½¿ç”¨æ­£ç¢ºçš„å‹åˆ¥å®šç¾©
import type { TransType } from '@/hooks/auto-imports/useTrans.ts'

const i18n = useTrans() as TransType
const t = i18n.globalTrans  // å‹åˆ¥å®‰å…¨çš„ç¿»è­¯å‡½å¼
```

### é–‹ç™¼å·¥å…·

#### IDE å¤–æ›æ¨è–¦

- **VSCode**: [i18n Ally](https://marketplace.visualstudio.com/items?itemName=Lokalise.i18n-ally)
- **WebStorm**: [Easy i18n](https://plugins.jetbrains.com/plugin/16316-easy-i18n)

#### é™¤éŒ¯æŠ€å·§

```typescript
// å•Ÿç”¨è©³ç´°æ—¥èªŒ
const i18n = createI18n({
  // ... å…¶ä»–é…ç½®
  silentTranslationWarn: false,  // é¡¯ç¤ºç¿»è­¯è­¦å‘Š
  silentFallbackWarn: false,     // é¡¯ç¤ºå›é€€è­¦å‘Š
  missingWarn: true,             // é¡¯ç¤ºç¼ºå¤±è­¦å‘Š
  fallbackWarn: true,            // é¡¯ç¤ºå›é€€è­¦å‘Š
})
```

## æ¸¬è©¦ç­–ç•¥

### å–®å…ƒæ¸¬è©¦

```typescript
// tests/i18n.spec.ts
import { mount } from '@vue/test-utils'
import { createI18n } from 'vue-i18n'

describe('i18n Component', () => {
  const i18n = createI18n({
    legacy: false,
    locale: 'zh_CN',
    messages: {
      zh_CN: { hello: 'ä½ å¥½' },
      en: { hello: 'Hello' }
    }
  })

  it('renders correct translation', () => {
    const wrapper = mount(TestComponent, {
      global: { plugins: [i18n] }
    })
    expect(wrapper.text()).toContain('ä½ å¥½')
  })

  it('switches language correctly', async () => {
    i18n.global.locale.value = 'en'
    await wrapper.vm.$nextTick()
    expect(wrapper.text()).toContain('Hello')
  })
})
```

### E2E æ¸¬è©¦

```typescript
// tests/e2e/i18n.spec.ts
test('language switching works', async ({ page }) => {
  await page.goto('/login')
  
  // æª¢æŸ¥é è¨­èªè¨€
  await expect(page.locator('.login-title')).toHaveText('ç™»å…¥')
  
  // åˆ‡æ›èªè¨€
  await page.click('.language-switcher')
  await page.click('[data-lang="en"]')
  
  // æª¢æŸ¥èªè¨€åˆ‡æ›æ•ˆæœ
  await expect(page.locator('.login-title')).toHaveText('Login')
})
```

## æ“´å……å¥—ä»¶é–‹ç™¼

### æ–°å¢æ–°èªè¨€

1. **å»ºç«‹èªè¨€åŒ…æª”æ¡ˆ**:
```bash
# åœ¨ src/locales/ ä¸‹å»ºç«‹æ–°èªè¨€æª”æ¡ˆ
touch src/locales/ja[æ—¥æœ¬èª].yaml
```

2. **æ–°å¢ç¿»è­¯å…§å®¹**:
```yaml
# ja[æ—¥æœ¬èª].yaml
loginForm:
  loginButton: ãƒ­ã‚°ã‚¤ãƒ³
  passwordPlaceholder: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
  
crud:
  save: å„²å­˜
  cancel: ã‚­ãƒ£ãƒ³ã‚»ãƒ«
```

3. **æ›´æ–°èªè¨€é…ç½®**:
```typescript
// å¦‚æœéœ€è¦ï¼Œåœ¨åˆå§‹åŒ–æ™‚æ–°å¢æ–°èªè¨€æ”¯æ´
const supportedLocales = ['zh_CN', 'en', 'zh_TW', 'ja']
```

### è‡ªå®šç¾©ç¿»è­¯é‚è¼¯

```typescript
// å»ºç«‹è‡ªå®šç¾©ç¿»è­¯ Hook
export function useCustomTrans() {
  const { t, te } = useI18n()
  
  return {
    t: (key: string, fallback?: string) => {
      if (te(key)) {
        return t(key)
      }
      
      // è‡ªå®šç¾©å›é€€é‚è¼¯
      if (fallback) {
        return fallback
      }
      
      // è¨˜éŒ„ç¼ºå¤±çš„ç¿»è­¯éµ
      console.warn(`Missing translation: ${key}`)
      return key
    }
  }
}
```

## æœ€ä½³å¯¦è¸

### 1. éµåå‘½åè¦ç¯„

```yaml
# æ¨è–¦ï¼šä½¿ç”¨åç¨±ç©ºé–“å’Œèªç¾©åŒ–å‘½å
user:
  profile:
    title: å€‹äººè³‡æ–™
    edit: ç·¨è¼¯è³‡æ–™
  management:
    title: ä½¿ç”¨è€…ç®¡ç†
    create: å»ºç«‹ä½¿ç”¨è€…

# é¿å…ï¼šéæ–¼æ‰å¹³çš„çµæ§‹
userProfileTitle: å€‹äººè³‡æ–™
userProfileEdit: ç·¨è¼¯è³‡æ–™
```

### 2. å…ƒä»¶è¨­è¨ˆ

```vue
<!-- æ¨è–¦ï¼šå°‡ç¿»è­¯é‚è¼¯å°è£åœ¨å…ƒä»¶å…§éƒ¨ -->
<template>
  <div class="user-card">
    <h3>{{ title }}</h3>
    <p>{{ description }}</p>
  </div>
</template>

<script setup lang="ts">
interface Props {
  userId: string
}

const props = defineProps<Props>()
const { t } = useLocalTrans()

const title = computed(() => t('title'))
const description = computed(() => t('description', { id: props.userId }))
</script>

<i18n lang="yaml">
zh_CN:
  title: ä½¿ç”¨è€…è³‡è¨Š
  description: ä½¿ç”¨è€…IDï¼š{id}
en:
  title: User Info
  description: User ID: {id}
</i18n>
```

### 3. æ•ˆèƒ½è€ƒæ…®

```typescript
// æ¨è–¦ï¼šå¿«å–è¨ˆç®—çµæœ
const translatedOptions = computed(() => {
  return options.map(option => ({
    ...option,
    label: t(`options.${option.key}`)
  }))
})

// é¿å…ï¼šåœ¨æ¸²æŸ“å‡½å¼ä¸­é‡è¤‡å‘¼å«ç¿»è­¯
// {{ options.map(opt => t(`options.${opt.key}`)) }}
```